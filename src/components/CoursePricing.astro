---
import CourseModalitiesCard from "./CourseModalitiesCard.astro";
import cardIcon from "@assets/svg/card.svg";
import arrowsIcon from "@assets/svg/arrows.svg";
import moneysIcon from "@assets/svg/moneys.svg";
import alertIcon from "@assets/svg/alert.svg";
import checkIcon from "@assets/svg/tick-circle.svg";
import { Image } from "astro:assets";

interface Props {
  id?: string;
}

const { id = "precios" }: Props = Astro.props;

const priceColumns = [
  {
    label: "Precio promocional de lanzamiento",
    amount: "$4,444",
    currency: "MXN",
  },
  {
    label: "Precio general del curso",
    amount: "$8,888",
    currency: "MXN",
  },
];

const upfrontNote =
  "En una sola exhibición y para quien se inscriba máximo 15 días antes de iniciar el curso.";

const paymentPlans = [
  {
    title: "Dos pagos",
    items: ["1er semana: $4,444", "5ta semana: $4,444"],
  },
  {
    title: "Cuatro pagos",
    items: [
      "1er semana: $2,222",
      "2da semana: $2,222",
      "3er semana: $2,222",
      "4ta semana: $2,222",
    ],
  },
  {
    title: "8 pagos",
    items: ["Pagos semanales de $1,111 durante 8 semanas."],
  },
];

const paymentMethods = [
  {
    icon: cardIcon,
    title: "Tarjeta de crédito o débito",
    description: [
      { text: "Pago único o en parcialidades.", icon: checkIcon },
      {
        text: "Si el pago se hace a meses, puede aplicarse comisión o intereses.",
        icon: alertIcon,
      },
    ],
  },
  {
    icon: arrowsIcon,
    title: "Transferencia",
    description: [
      { text: "Pago único o en parcialidades.", icon: checkIcon },
      { text: "Opción directa y sin comisiones.", icon: checkIcon },
    ],
  },
  {
    icon: moneysIcon,
    title: "Efectivo",
    description: [
      {
        text: "Método de pago válido solo para la modalidad presencial en vivo.",
        icon: alertIcon,
      },
    ],
  },
];
---

<section id={id}>
  <div class="px-4 pt-16 pb-10 md:pt-24 md:pb-8">
    <div
      class="container relative mx-auto bg-primary px-6 pb-24 pt-16 text-accent shadow-[0_25px_80px_-40px_rgba(34,9,34,0.55)] md:px-10 md:pb-28 md:pt-20"
    >
      <div
        class="grid gap-12 md:grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] md:gap-16"
      >
        <div class="flex flex-col items-center text-center">
          <span
            class="text-sm lg:text-lg font-heading italic uppercase text-accent/80 mb-0"
          >
            {priceColumns[0].label}
          </span>
          <span
            class="mt-5 font-heading-sc text-5xl font-bold leading-none md:text-7xl"
          >
            {priceColumns[0].amount}
            <span
              class="ml-2 text-base font-sans font-medium uppercase text-accent/60"
            >
              {priceColumns[0].currency}
            </span>
          </span>
        </div>

        <div class="mx-auto hidden h-full w-px bg-accent/30 md:block"></div>

        <div class="flex flex-col items-center text-center">
          <span
            class="text-sm lg:text-lg font-heading italic uppercase text-accent/80 mb-2"
          >
            {priceColumns[1].label}
          </span>
          <span class="mt-5 font-heading text-5xl font-semibold md:text-7xl">
            {priceColumns[1].amount}
            <span
              class="ml-2 text-base font-sans font-medium uppercase text-accent/60"
            >
              {priceColumns[1].currency}
            </span>
          </span>
        </div>
      </div>

      <div class="mt-10 md:hidden">
        <div class="mx-auto h-px w-4/5 bg-accent/30"></div>
      </div>

      <div
        class="absolute bottom-6 left-6 right-6 flex items-start gap-3 text-left text-sm leading-relaxed text-accent/80 md:bottom-10 md:left-10 md:right-10 md:text-base"
      >
        <Image
          src={alertIcon}
          alt="Condiciones de pago"
          class="mt-0.5 h-5 w-5 flex-shrink-0"
          loading="lazy"
        />
        <p class="md:whitespace-nowrap">{upfrontNote}</p>
      </div>
    </div>
  </div>

  <div class="container mx-auto px-4 pb-16 text-primary md:pb-24">
    <p
      class="text-center font-heading text-2xl font-semibold italic tracking-tight text-primary md:text-3xl"
    >
      O elige entre una de las tres opciones de pago a plazos
    </p>

    <div class="mt-8 overflow-hidden">
      <table
        class="w-full table-fixed border border-primary text-sm md:text-base"
      >
        <tbody>
          <tr class="divide-x divide-primary">
            {
              paymentPlans.map((plan) => (
                <td class="px-6 py-8 text-center align-top md:w-1/3 md:px-10">
                  <p class="font-heading text-xl font-black text-primary md:text-2xl italic">
                    {plan.title}
                  </p>
                  <div class="mt-4 space-y-2">
                    {plan.items.map((item) => (
                      <p>{item}</p>
                    ))}
                  </div>
                </td>
              ))
            }
          </tr>
        </tbody>
      </table>
    </div>

    <div class="mt-16 md:mt-20">
      <h3
        class="text-center font-heading text-4xl font-extrabold italic tracking-tight text-primary md:text-5xl"
      >
        Formas de pago
      </h3>

      <div class="mt-12 grid gap-6 md:grid-cols-3 md:items-stretch">
        {
          paymentMethods.map((method) => (
            <CourseModalitiesCard
              title={method.title}
              description={method.description}
              icon={method.icon}
              titleClass="uppercase"
              containerClass="rounded-2xl"
            />
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  @reference "../styles/global.css";
</style>
