---
import type { ImageMetadata } from "astro";
import PricingInfoCard from "./PricingInfoCard.astro";
import cardIcon from "@assets/svg/card.svg";
import arrowsIcon from "@assets/svg/arrows.svg";
import moneysIcon from "@assets/svg/moneys.svg";
import alertIcon from "@assets/svg/alert.svg";

interface Props {
  id?: string;
}

interface InfoCard {
  icon: ImageMetadata;
  iconAlt: string;
  title: string;
  subtitle?: string;
  items: string[];
}

const { id = "precios" }: Props = Astro.props;

const priceColumns = [
  {
    label: "Precio promocional de lanzamiento",
    amount: "$4,444",
    currency: "MXN",
  },
  {
    label: "Precio general del curso",
    amount: "$8,888",
    currency: "MXN",
  },
];

const upfrontNote =
  "En una sola exhibición y para quien se inscriba máximo 15 días antes de iniciar el curso.";

const paymentPlans: InfoCard[] = [
  {
    icon: cardIcon,
    iconAlt: "Plan en dos pagos",
    title: "Dos pagos",
    items: ["1er pago: $2,222", "2do pago: $2,222"],
  },
  {
    icon: arrowsIcon,
    iconAlt: "Plan en cuatro pagos",
    title: "Cuatro pagos",
    items: [
      "Semana 1: $1,111",
      "Semana 2: $1,111",
      "Semana 3: $1,111",
      "Semana 4: $1,111",
    ],
  },
  {
    icon: moneysIcon,
    iconAlt: "Plan en ocho pagos",
    title: "Ocho pagos",
    items: [
      "Semana 1: $555",
      "Semana 2: $555",
      "Semana 3: $555",
      "Semana 4: $555",
      "Semana 5: $555",
      "Semana 6: $555",
      "Semana 7: $555",
      "Semana 8: $555",
    ],
  },
];

const paymentMethods: InfoCard[] = [
  {
    icon: cardIcon,
    iconAlt: "Pago con tarjeta",
    title: "Tarjeta de crédito o débito",
    subtitle: "Pago único o en parcialidades",
    items: [
      "Confirma tu lugar al instante con pago seguro.",
      "Puede aplicar comisión por diferir a meses según tu banco.",
    ],
  },
  {
    icon: arrowsIcon,
    iconAlt: "Pago por transferencia",
    title: "Transferencia",
    subtitle: "Pago único o en parcialidades",
    items: [
      "Solicita los datos bancarios y registra tu comprobante.",
      "Evita comisiones adicionales al realizarlo desde tu banca en línea.",
    ],
  },
  {
    icon: moneysIcon,
    iconAlt: "Pago en efectivo",
    title: "Efectivo",
    subtitle: "Pago único o en parcialidades",
    items: [
      "Disponible para modalidad presencial o punto autorizado.",
      "Agenda tu entrega con anticipación para asegurar tu lugar.",
    ],
  },
];
---
<section id={id}>
  <div class="bg-primary text-accent">
    <div class="container mx-auto px-4 py-16 md:py-24">
      <div class="grid gap-12 md:grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] md:items-start md:gap-16">
        <div class="flex flex-col items-center text-center md:items-start md:text-left">
          <span class="text-sm font-semibold uppercase tracking-[0.2em] text-accent/80">
            {priceColumns[0].label}
          </span>
          <span class="mt-4 font-heading text-5xl font-semibold md:text-6xl">
            {priceColumns[0].amount}
            <span class="ml-2 text-base font-sans font-medium uppercase tracking-[0.3em] text-accent/60">
              {priceColumns[0].currency}
            </span>
          </span>
        </div>

        <div class="mx-auto h-px w-16 bg-accent/30 md:h-full md:w-px"></div>

        <div class="flex flex-col items-center text-center md:items-start md:text-left">
          <span class="text-sm font-semibold uppercase tracking-[0.2em] text-accent/80">
            {priceColumns[1].label}
          </span>
          <span class="mt-4 font-heading text-5xl font-semibold md:text-6xl">
            {priceColumns[1].amount}
            <span class="ml-2 text-base font-sans font-medium uppercase tracking-[0.3em] text-accent/60">
              {priceColumns[1].currency}
            </span>
          </span>
        </div>
      </div>

      <div class="mt-12 flex items-start gap-3 text-left text-sm leading-relaxed text-accent/80 md:text-base">
        <img
          src={alertIcon.src}
          alt="Condiciones de pago"
          class="mt-0.5 h-5 w-5 flex-shrink-0"
          loading="lazy"
        />
        <p>{upfrontNote}</p>
      </div>
    </div>
  </div>

  <div class="bg-accent/10 text-primary">
    <div class="container mx-auto px-4 py-16 md:py-24">
      <p class="text-center text-sm uppercase tracking-[0.3em] text-primary/70">
        O elige entre una de las tres opciones de pago a plazos
      </p>

      <div class="mt-10 grid gap-6 md:grid-cols-3">
        {paymentPlans.map((plan) => (
          <PricingInfoCard {...plan} />
        ))}
      </div>

      <div class="mt-16">
        <h3 class="text-center font-heading text-3xl font-semibold uppercase tracking-tight text-primary">
          Formas de pago
        </h3>

        <div class="mt-10 grid gap-6 md:grid-cols-3">
          {paymentMethods.map((method) => (
            <PricingInfoCard {...method} />
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @reference "../styles/global.css";
</style>
