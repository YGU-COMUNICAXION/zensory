---
import CourseModalitiesCard from "./CourseModalitiesCard.astro";
import cardIcon from "@assets/svg/card.svg";
import arrowsIcon from "@assets/svg/arrows.svg";
import moneysIcon from "@assets/svg/moneys.svg";
import alertIcon from "@assets/svg/alert.svg";

interface Props {
  id?: string;
}

const { id = "precios" }: Props = Astro.props;

const priceColumns = [
  {
    label: "Precio promocional de lanzamiento",
    amount: "$4,444",
    currency: "MXN",
  },
  {
    label: "Precio general del curso",
    amount: "$8,888",
    currency: "MXN",
  },
];

const upfrontNote =
  "En una sola exhibición y para quien se inscriba máximo 15 días antes de iniciar el curso.";

const paymentPlans = [
  {
    title: "Dos pagos",
    items: ["1er semana: $4,444", "5ta semana: $4,444"],
  },
  {
    title: "Cuatro pagos",
    items: [
      "1er semana: $2,222",
      "2da semana: $2,222",
      "3er semana: $2,222",
      "4ta semana: $2,222",
    ],
  },
  {
    title: "8 pagos",
    items: ["Pagos semanales de $1,111 durante 8 semanas."],
  },
];

const paymentMethods = [
  {
    icon: cardIcon,
    title: "Tarjeta de crédito o débito",
    description: [
      "Pago único o en parcialidades.",
      "Si el pago se hace a meses pueden aplicarse comisión o intereses.",
    ],
  },
  {
    icon: arrowsIcon,
    title: "Transferencia",
    description: [
      "Pago único o en parcialidades.",
      "Opción directa y sin comisiones.",
    ],
  },
  {
    icon: moneysIcon,
    title: "Efectivo",
    description: [
      "Método de pago válido solo para la modalidad presencial en vivo.",
    ],
  },
];
---
<section id={id}>
  <div class="px-4 py-16 md:py-24">
    <div class="container mx-auto bg-primary px-6 py-16 text-accent shadow-[0_25px_80px_-40px_rgba(34,9,34,0.55)] md:px-10 md:py-20">
      <div class="grid gap-12 md:grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] md:gap-16">
        <div class="flex flex-col items-center text-center">
          <span class="text-sm font-semibold uppercase tracking-[0.2em] text-accent/80">
            {priceColumns[0].label}
          </span>
          <span class="mt-5 font-heading text-5xl font-semibold md:text-6xl">
            {priceColumns[0].amount}
            <span class="ml-2 text-base font-sans font-medium uppercase tracking-[0.3em] text-accent/60">
              {priceColumns[0].currency}
            </span>
          </span>
        </div>

        <div class="mx-auto hidden h-full w-px bg-accent/30 md:block"></div>

        <div class="flex flex-col items-center text-center">
          <span class="text-sm font-semibold uppercase tracking-[0.2em] text-accent/80">
            {priceColumns[1].label}
          </span>
          <span class="mt-5 font-heading text-5xl font-semibold md:text-6xl">
            {priceColumns[1].amount}
            <span class="ml-2 text-base font-sans font-medium uppercase tracking-[0.3em] text-accent/60">
              {priceColumns[1].currency}
            </span>
          </span>
        </div>
      </div>

      <div class="mt-10 md:hidden">
        <div class="mx-auto h-px w-4/5 bg-accent/30"></div>
      </div>

      <div class="mt-12 flex items-start gap-3 text-left text-sm leading-relaxed text-accent/80 md:text-base">
        <img
          src={alertIcon.src}
          alt="Condiciones de pago"
          class="mt-0.5 h-5 w-5 flex-shrink-0"
          loading="lazy"
        />
        <p>{upfrontNote}</p>
      </div>
    </div>
  </div>

  <div class="bg-accent/10 text-primary">
    <div class="container mx-auto px-4 py-16 md:py-24">
      <p class="text-center font-heading text-xl font-semibold uppercase tracking-wide text-primary">
        O elige entre una de las tres opciones de pago a plazos
      </p>

      <div class="mt-10 overflow-hidden rounded-3xl border border-primary/15 bg-white/60 shadow-[0_25px_80px_-60px_rgba(34,9,34,0.5)]">
        <table class="w-full table-fixed text-left">
          <thead>
            <tr class="bg-primary text-accent">
              {paymentPlans.map((plan) => (
                <th class="px-6 py-5 text-center font-heading text-xl font-semibold uppercase tracking-wide">
                  {plan.title}
                </th>
              ))}
            </tr>
          </thead>
          <tbody>
            <tr class="divide-x divide-primary/10 text-sm md:text-base">
              {paymentPlans.map((plan) => (
                <td class="px-6 py-6 align-top">
                  <ul class="space-y-3 text-center">
                    {plan.items.map((item) => (
                      <li>{item}</li>
                    ))}
                  </ul>
                </td>
              ))}
            </tr>
          </tbody>
        </table>
      </div>

      <div class="mt-20">
        <h3 class="text-center font-heading text-4xl font-bold italic tracking-tight text-primary">
          Formas de pago
        </h3>

        <div class="mt-12 grid gap-6 md:grid-cols-3">
          {paymentMethods.map((method) => (
            <CourseModalitiesCard
              title={method.title}
              description={method.description}
              icon={method.icon}
            />
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @reference "../styles/global.css";
</style>
