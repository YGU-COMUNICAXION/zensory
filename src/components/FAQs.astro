---
import type { FAQ } from "../data/faqs";
import { FAQS } from "../data/faqs";

interface Props {
  id?: string;
  faqs?: FAQ[];
}

const { id = "faqs", faqs = FAQS }: Props = Astro.props;
---

<section id={id} class="bg-accent/10 py-16 text-primary">
  <div class="container mx-auto px-6 md:px-8">
    <header class="mb-10 text-left md:mb-12">
      <h2 class="font-heading text-4xl font-extrabold italic md:text-5xl">
        FAQs
      </h2>
    </header>

    <div class="flex flex-col">
      {
        faqs.map((faq) => (
          <details
            class="group py-6 transition-colors duration-200"
            data-faq-accordion
          >
            <summary class="cursor-pointer text-left hover:cursor-pointer">
              <span class="inline-flex items-start gap-3 text-lg font-normal leading-snug md:text-xl">
                <span>{faq.question}</span>
                {/* <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  class="h-6 w-6 flex-shrink-0 text-primary transition-transform duration-200 group-open:rotate-180"
                  aria-hidden="true"
                >
                  <path
                    d="M6 9l6 6 6-6"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg> */}
              </span>
            </summary>
            <div class="pt-4 text-base leading-relaxed text-primary/80 md:text-lg">
              {faq.answer.map((paragraph) => (
                <p class="mt-3 first:mt-0">{paragraph}</p>
              ))}
            </div>
          </details>
        ))
      }
    </div>
  </div>
</section>

<script>
  document.addEventListener("astro:page-load", () => {
    const accordions = Array.from(
      document.querySelectorAll<HTMLDetailsElement>("[data-faq-accordion]")
    );

    accordions.forEach((details) => {
      details.addEventListener("toggle", () => {
        if (details.open) {
          accordions.forEach((other) => {
            if (other !== details) {
              other.open = false;
            }
          });
        }
      });
    });
  });
</script>

<style>
  @reference "../styles/global.css";

  summary::-webkit-details-marker {
    display: none;
  }
</style>
